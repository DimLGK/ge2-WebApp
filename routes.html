<!DOCTYPE html>
<html lang="en">

<head>
  <title>Tour Explorations</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <!-- Firebase JS SDK region -->
  <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-database.js"></script>

  <!--     <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB5LkpbrBebUMIxDsheKApRb6gI7ts91Lg&callback=initMap&libraries=&v=weekly"
        defer></script> -->

  <!-- Style region -->
  <link rel="stylesheet" type="text/css" href="./style.css" />
  <script src="./routes.js"></script>
  <!-- Editable Popup   -->
  <link rel="stylesheet" type="text/css" href="./popupMod.css" />
  <script src="./popupMod.js"></script>  

  <!-- Load Leaflet from CDN -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>
  <!-- Load Esri Leaflet from CDN -->
  <script src="https://unpkg.com/esri-leaflet@2.5.0/dist/esri-leaflet.js"
    integrity="sha512-ucw7Grpc+iEQZa711gcjgMBnmd9qju1CICsRaryvX7HJklK0pGl/prxKvtHwpgm5ZHdvAil7YPxI1oWPOWK3UQ=="
    crossorigin=""></script>
  
    <!-- Load react-leaflet-editable-popup -->
  <link rel="stylesheet" href="popup_mod/leaflet-popup-modifier.css" />
  <script src="popup_mod/leaflet-popup-modifier.js"></script>

  <!-- Load Esri Leaflet Geocoder from CDN -->
  <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@2.3.3/dist/esri-leaflet-geocoder.css"
    integrity="sha512-IM3Hs+feyi40yZhDH6kV8vQMg4Fh20s9OzInIIAc4nx7aMYMfo+IenRUekoYsHZqGkREUgx0VvlEsgm7nCDW9g=="
    crossorigin="">
  <script src="https://unpkg.com/esri-leaflet-geocoder@2.3.3/dist/esri-leaflet-geocoder.js"
    integrity="sha512-HrFUyCEtIpxZloTgEKKMq4RFYhxjJkCiF5sDxuAokklOeZ68U2NPfh4MFtyIVWlsKtVbK5GD2/JzFyAfvT5ejA=="
    crossorigin="">
  </script>
</head>

<body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="60">

  <header class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#myPage">Tour Explorations</a>
      </div>
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="index.html">ΑΡΧΙΚΗ</a></li>
          <li><a href="requests.html">ΑΙΤΗΜΑΤΑ</a></li>
          <li><a href="routes.html">ΔΙΑΔΡΟΜΕΣ</a></li>
          <li><a href="guides.html">ΞΕΝΑΓΟΙ</a></li>
        </ul>
      </div>
    </div>
  </header>

  <!-- main window -->
  <main>

    <div class="container-fluid">
      <div class="row flex-xl-nowrap">

        <!--  side navigation bar      -->
        <div class="sidenav col-12 col-md-3 col-xl-2">
          <a id="christina" class="sidebar-link" onclick="showChat(id)">
            <img class="sidebar-img" src="./pic/christina.jpg" />
            Χριστίνα Βασιλειάδη
          </a>
          <a id="tony" class="sidebar-link" onclick="showChat(id)">
            <img class="sidebar-img" src="./pic/tsan.jpg" />
            Tony Chan
          </a>
          <a id="hasan" class="sidebar-link" onclick="showChat(id)">
            <img class="sidebar-img" src="./pic/hasan.png" />
            Hasan Abdul
          </a>
        </div>
        <!--End of col-md-3 -->

        <!-- Central Area -->
        <div class="col-12 col-md-9 col-xl-8">
          <!-- Map section -->
          <div class="row" style="margin-right:-55px">
            <div id="map" style="height: 42rem; top:-1rem;"></div>
          </div> <!-- end of row1 -->

          <!-- Tour Section -->
          <div class="row" style="margin-right:-55px">
            <div id="tours" class="row text-center" style="position: relative; left: 26.5rem;">

              <div class="col-md-4">
                <div id="tour1" class="thumbnail">
                  <img src="./pic/KAMARA.jpg" alt="Καμάρα" width="200" height="100" onclick="showSites(arxaioGroup)">
                  <div class="hilight">
                    <p><strong>Αρχαιολογικοί χώροι</strong></p>
                  </div> <!-- End or hilight -->
                  <button id="tour1" type="button" class="btn btn-danger" styles="right: 0px; z-index: 1;"
                    onclick="showDelWarning(id)">Διαγραφή διαδρομής</button>
                </div> <!-- End or tour1 -->
              </div> <!-- End or col-md-4 column1 -->

              <div class="col-md-4">
                <div id="tour2" class="thumbnail">
                  <img src="./pic/adDim.jpg" alt="Αγιος Δημήτριος" width="200" height="100"
                    onclick="showSites(relegGroup)">
                  <div class="hilight">
                    <p><strong>Βυζαντινά μημεία</strong></p>
                  </div> <!-- End or hilight -->
                  <button id="tour2" type="button" class="btn btn-danger" styles="right: 0px; z-index: 1;"
                    onclick="showDelWarning(id)">Διαγραφή διαδρομής</button>
                </div> <!-- End or tour2 -->
              </div> <!-- End or col-md-4 column2 -->

              <div class="col-md-4">
                <div id="tour3" class="thumbnail">
                  <img src="./pic/astro.jpg" alt="Κέντρο Νόησις" width="200" height="100"
                    onclick="showSites(technoGroup)">
                  <div class="hilight">
                    <p><strong>Τεχνολογικά αξιοθέατα</strong></p>
                  </div> <!-- End of hilight -->
                  <button id="tour3" type="button" class="btn btn-danger" styles="right: 0px; z-index: 1;"
                    onclick="showDelWarning(id)">Διαγραφή διαδρομής</button>
                </div> <!-- End or tour3 -->
              </div> <!-- End or col-md-4 column3 -->
            </div> <!-- End of row2 -->
            
            <div id="tours" class="row text-center" style="position: relative; left: 26.5rem;">
              <div id="tour4" class="col-md-4">
                <div id="tour4" class="thumbnail">
                  <img id="newRouteImg1" src="#" alt="" onclick="showSites(relegGroup)">
                  <div id="ImageContainerr1" class="ImageContainer1"></div>
                  <div class="hilight">
                    <p><strong id="labelType">type</strong></p>
                  </div>
                  <button id="tour4" type="button" class="btn btn-danger" styles="right: 0px; z-index: 1;"
                    onclick="showDelWarning(id)">Διαγραφή διαδρομής</button>
                </div>
              </div>
            </div>
            
            
          </div> <!-- End or Tour Section -->
        </div>
        <button class="btn btn-primary open-button" style="position: fixed; bottom: 23px; right: 28px;"
          onclick="showAddRouteForm()">Προσθήκη διαδρομής</button>
  </main>
  </div> <!-- End or row -->
  </div> <!-- End of container -->


  <script>

    // Load the map with Esri Leaflet
    var map = L.map('map').setView([40.63, 22.94], 12);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    var arxaioGroup = L.layerGroup().addTo(map);
    var relegGroup = L.layerGroup().addTo(map);
    var technoGroup = L.layerGroup().addTo(map);

    // for (var data of arxaioData) {
    //   marker = L.marker([data.latitude, data.longitude], { draggable: 'true' }).bindPopup(data.title).openPopup();
    //   arxaioGroup.addLayer(marker);
    // }
    // for (var data of relegData) {
    //   marker = L.marker([data.latitude, data.longitude], { draggable: 'true' }).bindPopup(data.title).openPopup();
    //   relegGroup.addLayer(marker);
    // }
    // for (var data of technoData) {
    //   marker = L.marker([data.latitude, data.longitude], { draggable: 'true' }).bindPopup(data.title).openPopup();
    //   technoGroup.addLayer(marker);
    // }

    //function showSites(type) {
    //  map.removeLayer(arxaioGroup);
    //  map.removeLayer(relegGroup);
    //  map.removeLayer(technoGroup);
    //  map.addLayer(type);
    //}
    
    function readURL(input) {
      document.getElementById("ImageContainerr").style.display = "none";
      document.getElementById("newRouteImg").style.display = "block";
      if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
          $('#newRouteImg')
            .attr('src', e.target.result)
            .width(150)
            .height(200);
        };

        reader.readAsDataURL(input.files[0]);
      }
      
////
      document.getElementById("ImageContainerr1").style.display = "none";
      document.getElementById("newRouteImg1").style.display = "block";
      if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
          $('#newRouteImg1')
            .attr('src', e.target.result)
            .width(150)
            .height(200);
        };

        reader.readAsDataURL(input.files[0]);
      }
    }

    function addImage() {
      document.getElementById("newRouteImg").style.display = "none";
      document.getElementById("ImageContainerr").style.display = "block";
      var url = document.getElementsByClassName("imageURL1")[0].value;
      var image = new Image();
      image.src = url;
      document.getElementsByClassName("ImageContainer")[0].appendChild(image);

      ////
      document.getElementById("newRouteImg1").style.display = "none";
      document.getElementById("ImageContainerr1").style.display = "block";
      var url = document.getElementsByClassName("imageURL1")[0].value;
      var image = new Image();
      image.src = url;
      document.getElementsByClassName("ImageContainer1")[0].appendChild(image);
    }
  </script>

  <!-- Το παράθυρο προσθήκης route -->
  <form class="" onSubmit="return false;">
    <div id="routeForm" class="modal modal-dialog-centered"
      styles="display: table-cell; vertical-align: middle; z-index: 200;" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title"><b>Προσθήκη νέας διαδρομής</b></h5>
            </button>
          </div>
          <div class="modal-body">
            <form class="form-container-fluid">
              <div class="form-group">
                <label for="type">Τύπος ξενάγισης</label>
                <input type="text" class="form-control" id="type" aria-describedby="nameHelp" placeholder="Όνομα ξενάγησης...">
              </div>
              <div class="form-group">
                <label for="image">Προσθήκη εικόνας</label>
                <div class="form-group">
                  <input type="file" class="custom-file-input" id="validatedCustomFile" onchange="readURL(this);">
                  <input type="text" class="form-control imageURL1" id="imageUrl" placeholder="Επιλέξτε εικόνα..."
                    onChange="addImage();">

                  <img id="newRouteImg" src="#" alt="" />
                  <div id="ImageContainerr" class="ImageContainer"></div>

                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" onclick="closeAddRouteForm()">Κλείσιμο</button>
            <button type="button" class="btn btn-primary" onclick="addRoute()">Προσθήκη</button>
          </div>
        </div>
      </div>
    </div>
  </form>


  <!-- delete warning modal -->
  <div id="delWarning" class="modal modal-dialog-centered"
    styles="display: table-cell; vertical-align: middle; z-index: 200;" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><b style="color: red;">Ειδοποίηση</b></h5>
          </button>
        </div>
        <div class="modal-body">
          <p>Πρόκειται να διαγράψετε αυτή τη διαδρομή. Η συγκεκριμένη ενέργεια είναι μη αναστρέψιμη και
            μπορεί να αναιρεθεί μόνο προσθέτοντας διαδρομές εκ νέου.</p> <br>
          <p>Είστε σίγουρος ότι θέλετε να προχωρήσετε σε διαγραφή;</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeDelWarning()">Κλείσιμο</button>
          <button type="button" class="btn btn-danger" onclick="delRoute()">Διαγραφή</button>
        </div>
      </div>
    </div>
  </div>


<!-- delete route confirmation modal -->
  <div id="delConfirm" class="modal modal-dialog-centered"
    styles="display: table-cell; vertical-align: middle; z-index: 200;" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><b>Επιτυχής Διαγραφή</b></h5>
          </button>
        </div>
        <div class="modal-body">
          <p>Η διαδρομή διαγράφηκε με επιτυχία.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeDelConfirmation()">Οκ</button>
        </div>
      </div>
    </div>
  </div>


  <!-- Chat -->
  <div class="chat-popup" id="chat">
    <form class="form-container">
      <label id="chatHeader" for="chat"><b>Μήνυμα</b></label>
      <textarea id="textMsg" placeholder="Type message.." name="chatmsg" required></textarea>
      <button type="button" class="btn btn-danger" onclick="closeChat()">Κλείσιμο</button>
      <button type="button" class="btn btn-primary" onclick="sendMsg()">Αποστολή</button>
    </form>
  </div>


</body>

</html>
